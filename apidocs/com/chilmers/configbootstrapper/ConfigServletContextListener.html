<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="sv">
<head>
<!-- Generated by javadoc (version 1.7.0_07) on Mon Jan 14 10:54:57 CET 2013 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>ConfigServletContextListener (config-bootstrapper-project 1.0-SNAPSHOT API)</title>
<meta name="date" content="2013-01-14">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ConfigServletContextListener (config-bootstrapper-project 1.0-SNAPSHOT API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../com/chilmers/configbootstrapper/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ConfigServletContextListener.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/chilmers/configbootstrapper/ConfigServletContextListener.html" target="_top">Frames</a></li>
<li><a href="ConfigServletContextListener.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.chilmers.configbootstrapper</div>
<h2 title="Class ConfigServletContextListener" class="title">Class ConfigServletContextListener</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.chilmers.configbootstrapper.ConfigServletContextListener</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="http://docs.oracle.com/javase/7/docs/api/java/util/EventListener.html?is-external=true" title="class or interface in java.util">EventListener</a>, javax.servlet.ServletContextListener</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">ConfigServletContextListener</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements javax.servlet.ServletContextListener</pre>
<div class="block"><p>
 Helps initializing logging and application configuration for a system.<br/>
 <br/>
 It does two main things:<br/>
 <ul>
  <li> Finds out which application configuration file to use, and sets it as a system property (by default "application.config.location") <br/>
      making it possible for the application to use separate configurations for separate environments. <br/>
  </li>
  <li>    
      Loads the logging configuration in a way that makes it possible to<br/> 
      use different log4j configurations in different environments.<br/>
  </li>
 <ul>
 </p>
 <br/>
 
 <b>Finding correct application configuration</b><br/>
 <p>
 This context listener will in the given order look in the system properties, environment variables<br/>
 or the servlet context parameters for the location of a configuration file to use in the application.<br/>
 By default it will look for an entry with the key "application.config.location". (This key name can be overridden, see Overriding defaults below)<br/>
 If no such entry is found it will by default fall back to using "classpath:/application.properties" as configuration location. (The fallback location can also be overridden if necessary, see below)<br/>
 <br/>
 Whichever configuration location string is decided, will be set in the system properties using the same key as above, 
 i.e by default it will be set in system property "application.config.location"<br/> 
 This makes it possible to locate the configuration from within the application, for example by reading it into a 
 PropertyResourceBundle or by using Spring's PropertyPlaceholderConfigurer like this:
 <br/>
  <pre>  
  &lt;bean id="placeholderConfig" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"&gt;
      &lt;property name="location" value="${application.config.location}" /&gt;
  &lt;/bean&gt;
  </pre>
 <br/>
 <br/> 
 <b>Logging configuration (i.e. Log4j)</b><br/>
 This mechanism configures Log4j using a given file whose location is stated in the application configuration, 
 or if no such file is available falls back to Log4j's default configuration behavior, <br/>
 i.e. looks for log4j.xml or log4j.properties on the classpath.<br/>
 <br/>
 To use an external log4j file you will have to state the location of the file in the application configuration as 
 a property with the key given by "application.log4j.config.location". (This key name can be overriden, see Overriding defaults below)<br/>
 </p>
 <br/>
 <br/> 
 <b>Usage</b><br/>
 <p>
 Add this to your web.xml and make sure it is located before any application specific listeners that need
 to use the configuration location property or that needs to log. E.g. before Spring's ContextLoaderListener<br/>
 <pre>
  &lt;listener&gt;
      &lt;listener-class&gt;com.chilmers.configbootstrapper.ConfigServletContextListener&lt;/listener-class&gt;
  &lt;/listener&gt;
 </pre>
 
 If you want to specify an external configuration file (instead of the default "classpath:/application.properties"), <br/>
 add a context-param or more likely a system property or environment variable stating the location of your application configuration. <br/> 
 For example:<br/>
 <br/>
  As context param:<br/>
  <pre>
  &lt;context-param&gt;
      &lt;description&gt;The location of the application configuration. 
          If not set it defaults to classpath:/application.properties&lt;/description&gt;
      &lt;param-name&gt;application.config.location&lt;/param-name&gt;
      &lt;param-value&gt;/Users/myusername/my-app-config/app.properties&lt;/param-value&gt;
  &lt;/context-param&gt;
  </pre>
 <br/>
  As environment variable in a bash shell:<br/>
  <pre>export application.config.location=/Users/myusername/my-app-config/app.properties</pre>
  <br/>
  As a system property upon starting your container:<br/>
  <pre>java [your application] -Dapplication.config.location=/Users/myusername/my-app-config/app.properties</pre><br/>
 </p>
 <br/>
 <b>Overriding defaults</b><br/>
 <p>
 The following context-parameters can be set to configure the listener.<br/>
 All of them have default values so they don't have to be set if not needed<br/>
 <pre>
  &lt;context-param&gt;
      &lt;description&gt;Sets the key for the entry that holds the application configuration location. 
          If not set it defaults to application.config.location&lt;/description&gt;
      &lt;param-name&gt;configServletContextListener.configLocationPropertyKey&lt;/param-name&gt;
      &lt;param-value&gt;myown.config.location&lt;/param-value&gt;
  &lt;/context-param&gt;
  </pre>
 <pre>
  &lt;context-param&gt;
      &lt;description&gt;Sets the key for where in the application configuration file to look for a log4j
          configuration file location.
          If not set it defaults to application.log4j.config.location&lt;/description&gt;
      &lt;param-name&gt;configServletContextListener.log4jConfigLocationPropertyKey&lt;/param-name&gt;
      &lt;param-value&gt;myown.log4j.config.location&lt;/param-value&gt;
  &lt;/context-param&gt;
  </pre>
 <pre>
  &lt;context-param&gt;
      &lt;description&gt;Sets the location of the application configuration to fall back to if no other configuration
          file location was set. E.g. a bundled configuration on the classpath. 
          If not set it defaults to classpath:/application.properties&lt;/description&gt;
      &lt;param-name&gt;configServletContextListener.fallbackConfigLocation&lt;/param-name&gt;
      &lt;param-value&gt;classpath:/myown.properties&lt;/param-value&gt;
  &lt;/context-param&gt;
  </pre>
 <pre>
  &lt;context-param&gt;
      &lt;description&gt;
      Application name that is printed when using System.out logging when no logging manager is available.
      Defaults to the display-name of the web.xml or if no display-name exists it will be ConfigServletContextListener
      &lt;/description&gt;
      &lt;param-name&gt;configServletContextListener.applicationName&lt;/param-name&gt;
      &lt;param-value&gt;My Application&lt;/param-value&gt;
  &lt;/context-param&gt;
  </pre>
  </p></div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Christian Hilmersson (https://github.com/chilmers/)</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../com/chilmers/configbootstrapper/ConfigServletContextListener.html#ConfigServletContextListener()">ConfigServletContextListener</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/chilmers/configbootstrapper/ConfigServletContextListener.html#contextDestroyed(javax.servlet.ServletContextEvent)">contextDestroyed</a></strong>(javax.servlet.ServletContextEvent&nbsp;sce)</code>
<div class="block">Destroys the servlet context and shutting down the Log Manager 
 which in turn is stopping Log4j's watch dog thread.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/chilmers/configbootstrapper/ConfigServletContextListener.html#contextInitialized(javax.servlet.ServletContextEvent)">contextInitialized</a></strong>(javax.servlet.ServletContextEvent&nbsp;sce)</code>
<div class="block">Configures the when the servlet context is initialized.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/7/docs/api/java/util/PropertyResourceBundle.html?is-external=true" title="class or interface in java.util">PropertyResourceBundle</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/chilmers/configbootstrapper/ConfigServletContextListener.html#getApplicationConfiguration(java.lang.String)">getApplicationConfiguration</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;applicationConfigLocation)</code>
<div class="block">Reads the application configuration file</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../com/chilmers/configbootstrapper/ConfigServletContextListener.html#loadApplicationConfigurationSystemProperties(java.util.PropertyResourceBundle)">loadApplicationConfigurationSystemProperties</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/PropertyResourceBundle.html?is-external=true" title="class or interface in java.util">PropertyResourceBundle</a>&nbsp;configBundle)</code>
<div class="block">Loads system properties from the application configuration</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../com/chilmers/configbootstrapper/ConfigServletContextListener.html#setSystemProperty(java.lang.String, java.lang.String)">setSystemProperty</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;key,
                 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;value)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ConfigServletContextListener()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ConfigServletContextListener</h4>
<pre>public&nbsp;ConfigServletContextListener()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="contextInitialized(javax.servlet.ServletContextEvent)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>contextInitialized</h4>
<pre>public&nbsp;void&nbsp;contextInitialized(javax.servlet.ServletContextEvent&nbsp;sce)</pre>
<div class="block">Configures the when the servlet context is initialized.
 </div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>contextInitialized</code>&nbsp;in interface&nbsp;<code>javax.servlet.ServletContextListener</code></dd>
</dl>
</li>
</ul>
<a name="setSystemProperty(java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSystemProperty</h4>
<pre>protected&nbsp;void&nbsp;setSystemProperty(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;key,
                     <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;value)</pre>
</li>
</ul>
<a name="getApplicationConfiguration(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getApplicationConfiguration</h4>
<pre>protected&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/PropertyResourceBundle.html?is-external=true" title="class or interface in java.util">PropertyResourceBundle</a>&nbsp;getApplicationConfiguration(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;applicationConfigLocation)</pre>
<div class="block">Reads the application configuration file</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>applicationConfigLocation</code> - The location of the application configuration</dd>
<dt><span class="strong">Returns:</span></dt><dd>application configuration properties</dd></dl>
</li>
</ul>
<a name="loadApplicationConfigurationSystemProperties(java.util.PropertyResourceBundle)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadApplicationConfigurationSystemProperties</h4>
<pre>protected&nbsp;void&nbsp;loadApplicationConfigurationSystemProperties(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/PropertyResourceBundle.html?is-external=true" title="class or interface in java.util">PropertyResourceBundle</a>&nbsp;configBundle)</pre>
<div class="block">Loads system properties from the application configuration</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>configBundle</code> - The application configuration</dd></dl>
</li>
</ul>
<a name="contextDestroyed(javax.servlet.ServletContextEvent)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>contextDestroyed</h4>
<pre>public&nbsp;void&nbsp;contextDestroyed(javax.servlet.ServletContextEvent&nbsp;sce)</pre>
<div class="block">Destroys the servlet context and shutting down the Log Manager 
 which in turn is stopping Log4j's watch dog thread.
 </div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>contextDestroyed</code>&nbsp;in interface&nbsp;<code>javax.servlet.ServletContextListener</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../com/chilmers/configbootstrapper/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ConfigServletContextListener.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/chilmers/configbootstrapper/ConfigServletContextListener.html" target="_top">Frames</a></li>
<li><a href="ConfigServletContextListener.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2013. All Rights Reserved.</small></p>
</body>
</html>
